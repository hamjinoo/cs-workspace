# ARP와 DHCP를 통한 라우터 통신
## 라우터와 IP 할당
가정에서 와이파이를 사용하는 경우, **DHCP(Dynamic Host Configuration Protocol)** 라는 프로토콜을 통해 와이파이 라우터가 각 장치에 자동으로 네트워크 설정을 할당해 줍니다. 그 설정에는 다음이 포함됩니다:

- **IP 주소** : 장치가 네트워크에서 사용하는 고유 주소.
- **서브넷 마스크** : 네트워크 내의 주소 범위를 정의합니다.
- **기본 게이트웨이** : 라우터의 내부 IP 주소로, LAN에서 WAN으로 나가는 출입구 역할을 합니다.
- **DNS 서버** : 도메인 이름을 IP 주소로 변환해주는 서버 정보.

이렇게 하면 각 장치는 네트워크 내에서 서로 통신할 수 있고, 인터넷에도 연결될 수 있습니다.

<br>

## ARP와 라우터 MAC 주소 찾기
WAN(인터넷)으로 데이터를 전송하기 위해서는, 네트워크의 **라우터 MAC 주소**를 알아야 합니다. 이 과정은 **ARP(Address Resolution Protocol)** 이라는 프로토콜을 통해 자동으로 처리됩니다. 과정은 다음과 같습니다:

1. **라우터의 IP 주소**는 DHCP를 통해 할당받은 **기본 게이트웨이 IP 주소**입니다. 예를 들어, 노트북의 기본 게이트웨이 IP가 `192.168.1.1`이라면, 이는 라우터의 IP 주소를 의미합니다.

2. 네트워크에서 **IP 주소**는 논리적 주소이고, **MAC 주소**는 물리적 주소입니다. IP 주소는 데이터를 라우팅하는 데 사용되지만, 로컬 네트워크(LAN) 내에서 실제로 데이터를 전송할 때는 MAC 주소가 필요합니다.

3. WAN으로 데이터를 전송하려고 할 때, 네트워크는 **ARP 요청**을 통해 해당 라우터의 IP 주소에 대응하는 **MAC 주소**를 찾습니다. ARP 요청이 보내지면, 라우터는 자신의 MAC 주소를 응답으로 보내줍니다.

4. 장치는 이렇게 라우터의 MAC 주소를 알아낸 후, 데이터를 WAN으로 전송할 수 있습니다.

<br>

### 요약
- **DHCP**는 라우터가 장치들에게 IP 주소와 기본 네트워크 설정을 할당하는 데 사용됩니다.
- **ARP**는 IP 주소에 대응하는 MAC 주소를 찾아주는 역할을 합니다.
- ARP를 통해 라우터의 MAC 주소를 알아야 WAN으로 데이터를 전송할 수 있습니다.


