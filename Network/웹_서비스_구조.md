

HTTP 연결은 Socket 수준에서 만들어지는 Stream

네트워크인 TCP/IP로 연결을 하려하지만 IP의 MTU는 1,500이기 때문에 일정 단위로 데이터를 잘라 segment를 만든다.

segment를 만들었으면 인캡슐레이터해서 네트워크에 패킷을 전송한다.



다만 웹은 소켓, 스트림 단계라 세그먼트와 패킷 단계의 얘기를 하지 않는다.


기본 구조 : HTTP는 문자열로 되어있고 기본 구조는 문서 요청하고 서버에서 문서를 보내주면 연결종료

그렇지만, 웹 서비스를 이루고 있는 기술을 종합적으로 이해 할 필요가 있다.



# 웹 서비스를 이루고 있는 기술

### 초창기 Web
| 초창기 Web의 기본은 HTML(문서)와 실현하는 HTTP가 가장 기본이 되었다.

클라이언트(브라우저)와 Web(서버) 사이에는 TCP/IP 기반의 연결을 기반으로 HTTP 통신이 이루어진다.

1. URL에 http://~~~.com 을 입력했을 때 DNS가 IP 상태를 물어보고 IP에 접속하고 TCP 연결을 시도하고 HTTP 연결이 이루어진다.
2. 그럼 서버에 http.request.method=GET 요청한 문서 라고 Request가 가는데 그러면 서버는 Request를 수신하고 Response를 보내준다.
3. 그럼 날라오는 HTML 문서를 화면에 표시하게 된다.
4. 만약 화면에 뿌려진 HTML에 특정 Link가 있으면 다시 1번부터 반복하게 된다.


렌더링만 하면 됐다.


그런데 개발을 하게 될때 설계 원칙이란 게 있는데 특정 세 개를 구분하라고 한다.
- UI
- Data (데이터베이스, 자료구조)
- 제어 체계(컨트롤, 비즈니스 체계 등)

결국 이 세 개로 구분하면 유지보수에 용이하다.



이렇게 문서가 잘 전달되다 보니까 문서를 꾸미고 싶어지는데 만약 설계 원칙인 문서를 꾸미기 위한 UI와 문서 그 자체의 Data가 하나로 있으면 고치기가 어려워서 분리하게 된다.
원래는 HTML에 안에 한번에 기술할 수 있었지만 그것을 구분하여 CSS를 만들었다.
: HTML(데이터) + css

1. 구문분석
2. 렌더링



당연히 문서는 정적의 문서인데 이 문서의 움직임이나 내용이 바뀔 수 있는 동적인 기능을 구현하기 위해 규칙을 만들고 script를 만들었다.



그렇다면 초장기에는 HTML(문서/텍스트)만 전달받으면 화면이 보여지게 됐는데 현재는 이렇게 바뀌게 된다.

1. 구문분석
2. 렌더링
3. JS 엔진

이렇게 단순히 HTML만 보내줬던 초장기와 달리 서버에 HTML, CSS, Asset, Javascript까지 포함되기 때문에 이 모든 것을 http.response 하게 된다.




그렇게 동적 시대로 발전된다....





물론 이로 인해 특정 정보를 찾기에 기능적인 면과 시각적인 면이 엄청나게 발전하게 되었지만,
지금까지는 클라이언트가 서버에게 요청을 하면 서버가 클라이언트한테 보내주는 단방향 상호작용이었기 때문에 
클라이언트는 서버에 있는 문서자료에 개입할 방법이 없었기에 양방향 상호작용까지는 기대하기가 어려웠다.


이때 http.request.method에 POST 생겨났다.

POST가 포함되면서 예로 로그인 버튼을 클릭하면 데이터가 서버에 전달이 되는 것처럼 양방향 상호작용을 하게 된다.


양방향 상호작용을 하게 됐는데, 그랬을 때 필연적으로 따르게 되는 상태전이인데 HTTP는 Stateless다. 
그렇다면 상태전이 과정의 저장이 필요해졌고 그 말은 즉 어딘가에 기억을 해야 될 필요가 생긴 것이다.

양방향이기 때문에 기억을 할 수 있는 구현은 클라이언트와 서버 모두가 하게 되었다.
다만 클라이언트는 개개인이라 기억하기 쉬운데 서버는 그 개개인과 상호작용을 하는 것을 다 기억해야한다. 
그래서 생겨난 게 DB 서버이다.

- 클라이언트 : 쿠키(상호작용을 위한 기억의 구상물)
- 서버 : 데이터베이스




다시 로그인페이지로 가보자
클라이언트가 ID와 Pwd를 입력하고 로그인하기 버튼을 누르면 http.request.method=POST가 서버에 전달이 된다.
서버 관점에서 이 ID와 Pwd를 원격지 사용자 입력라 부르고 무조건 신뢰하면 안되고 검증해야한다.


검증 전에 데이터베이스로 가보자 
데이터베이스에게 select * from table where id='~' and pwd='~' 라고 질의응답을 할 건데, 웹서버가 데이터베이스에 직접 접근하지 않고 그 중간에 중개해주는 서버가 하나 더 들어간다.
그렇게 된다면 웹 서버는 송/수신 역할을 하게 되고 데이터베이스는 자료를 기억하는 담당이고 가운데의 서버는 연산(처리)을 담당하게 된다.



이런 로직이 된다면 내가 Id와 Pwd를 전달하게 되면 이런저런 처리를 통해 내 정보를 받아서 새롭게 HTML을 전달하게 되기 때문에 동적이게 된다.



가운데에서 처리하는 담당 == WAS == MVC Architecture
- View : HTML 같은 눈에 보이는 것
- Model : 자료를 결합해서 최종적인 화면을 만든다.
- Controller : 제어체제(네트워크 Request)






이 아래에서 배우는 것이 WAS와 RESTful API 그리고 JVM이다.



































































































































































































































































































































































